package se.raweden.ui.view{	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.display.DisplayObjectContainer;	import flash.geom.Rectangle;		/**	 * A <code>UIImageView</code> provides a view-based container for displaying a single image.	 * 	 * <p>Copyright 2011 Raweden. All rights reserved.</p>	 * 	 * @author Raweden	 */	public class UIImageView extends UIView{				//		// TODO: implemenet a alternative way to render the images with the source property holding the current BitmapData.		// TODO: add support for animated images.		// TODO: write better documentation.		// TODO: use UIView.mode to determine how the image render Bitmap is scaled.		//				// image render properties.		private var _canvas:Bitmap;		private var _source:BitmapData;		// static image properties.		private var _image:BitmapData;		private var _highlightedImage:BitmapData;		// image view attributes.		private var _smoothing:Boolean = false;		private var _interactive:Boolean = false;		private var _highlighted:Boolean = false;				/**		 * Constructor.		 * 		 * @param parent		 * @param image		 * @param highlightedImage		 */		public function UIImageView(parent:DisplayObjectContainer = null,image:BitmapData = null,highlightedImage:BitmapData = null){			super(parent);			addChildren();			// setting images from constuctor.			this.image = image;			this.highlightedImage = highlightedImage;		}				/**		 * Creates and adds related views to this UIImageView instance.		 */		private function addChildren():void{			_canvas = new Bitmap();			this.addChild(_canvas);		}						//------------------------------------		// Setting and Getting Attributes.		//------------------------------------				/**		 * 		 */		public function set highlighted(value:Boolean):void{			_highlighted = value;		}		//		public function get highlighted():Boolean{			return _highlighted;		}				/**		 * A <code>Boolean</code> value that determine whether user interaction is ignored.		 * 		 * @default <code>false</code>		 */		public function set interactive(value:Boolean):void{			if(value != _interactive){				this.mouseEnabled = _interactive = value;			}		}		// indicates if user interaction is ignored.		public function get interactive():Boolean{			return _interactive;		}				/**		 * A <code>Boolean</code> value that determine whether smoothing is applied on the render.		 * 		 * @default <code>false</code>		 */		public function set smoothing(value:Boolean):void{			_smoothing = value;		}		//		public function get smoothing():Boolean{			return _smoothing;		}				//------------------------------------		// Single Image management.		//------------------------------------				/**		 * 		 */		public function set image(value:BitmapData):void{			_image = value;			if(!_highlighted){				_canvas.bitmapData = value;				this.needsLayout();				}		}		// returns the current image.		public function get image():BitmapData{			return _image;		}				/**		 * 		 */		public function set highlightedImage(value:BitmapData):void{			_highlightedImage = value;			if(_highlighted){				_canvas.bitmapData = value;				this.needsLayout();				}		}		//		public function get highlightedImage():BitmapData{			return _highlightedImage		}				//------------------------------------		// Laying out the view properily.		//------------------------------------				/**		 * @inheritDoc		 */		override protected function layout(rect:Rectangle):void{			var source:BitmapData = _canvas.bitmapData;			if(source){				var ratio:Number = source.width/source.height;				_canvas.width = rect.width;				_canvas.height = rect.width*ratio;				if(_smoothing){					_canvas.smoothing = true;				}			}		}		//------------------------------------		// Deconstruction		//------------------------------------				/**		 * @inheritDoc		 */		override public function dispose():void{			// destoying the super implemenation.			super.dispose();		}	}}